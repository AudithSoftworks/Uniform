(function(a){a.uniform={options:{selectClass:"selector",radioClass:"radio",checkboxClass:"checker",fileClass:"uploader",filenameClass:"filename",fileBtnClass:"action",fileDefaultText:"No file selected",fileBtnText:"Choose File",checkedClass:"checked",focusClass:"focus",disabledClass:"disabled",buttonClass:"button",activeClass:"active",hoverClass:"hover",useID:true,idPrefix:"uniform",resetSelector:false,autoHide:true},elements:[]};a.support.selectOpacity=!(a.browser.msie&&a.browser.version<7);a.uniform.restore=function(c){var b=c||a(a.uniform.elements);b.each(function(){var d=a(this);if(d.is(":button, :submit, :reset")){d.parent().html(d)}if(d.is(":checkbox, :radio, :button, :submit, :reset, a")){d.unwrap().unwrap()}if(d.is("select, :file")){d.unwrap().siblings("span").remove()}d.removeClass(d.attr("type")+" uniform");d.unbind(".uniform").css("opacity","1");var e=a.inArray(b,a.uniform.elements);a.uniform.elements.splice(e,1)});return this};a.uniform.noSelect=function(b){function c(){return false}b.each(function(){this.onselectstart=this.ondragstart=c;a(this).mousedown(c).css({MozUserSelect:"none"})});return this};a.uniform.update=function(c){var b=c||a(a.uniform.elements);this.restore(b);b.uniform()};a.fn.uniform=function(k){if(typeof k==="string"){if(k in a.uniform){return a.uniform[k](this)}return false}k=a.extend(a.uniform.options,k);var d=this;if(k.resetSelector){a(k.resetSelector).mouseup(function(){function l(){a.uniform.update(d)}setTimeout(l,10)})}var j=function(l){b(l.addClass(l.attr("type")))};var g=function(l){b(l.addClass("uniform"))};var i=function(n){var o=a("<div>"),l=a("<span>");o.addClass(k.buttonClass);if(k.useID&&n.attr("id")){o.attr("id",k.idPrefix+"-"+n.attr("id"))}var m=n.val()||n.text()||n.is(":reset")&&"Reset"||n.is(":submit")&&"Submit"||"";l.html(m);n.css("opacity",0).wrap(o).wrap(l);o=n.closest("div");l=n.closest("span");if(n.is(":disabled")){o.addClass(k.disabledClass)}o.bind({"mouseenter.uniform":function(){o.addClass(k.hoverClass)},"mouseleave.uniform":function(){o.removeClass(k.hoverClass+" "+k.activeClass)},"mousedown.uniform touchbegin.uniform":function(){o.addClass(k.activeClass)},"mouseup.uniform touchend.uniform":function(){o.removeClass(k.activeClass)},"click.uniform touchend.uniform":function(p){if(a(p.target).is("span, div")){n.trigger("click")}}});n.bind({"focus.uniform":function(){o.addClass(k.focusClass)},"blur.uniform":function(){o.removeClass(k.focusClass)}});a.uniform.noSelect(o);b(n)};var e=function(m){var n=a("<div>"),l=a("<span>");if(!m.css("display")=="none"&&k.autoHide){n.hide()}n.addClass(k.selectClass);if(k.useID&&m.attr("id")){n.attr("id",k.idPrefix+"-"+m.attr("id"))}l.html(m.find(":selected").text()||m.find("option:first").text());m.css("opacity",0).wrap(n).before(l);n=m.parent();l=m.siblings("span");m.bind({"change.uniform":function(){l.text(m.find(":selected").text());n.removeClass(k.activeClass)},"focus.uniform":function(){n.addClass(k.focusClass)},"blur.uniform":function(){n.removeClass(k.focusClass+" "+k.activeClass)},"mousedown.uniform touchbegin.uniform":function(){n.addClass(k.activeClass)},"mouseup.uniform touchend.uniform":function(){n.removeClass(k.activeClass)},"click.uniform touchend.uniform":function(){n.removeClass(k.activeClass)},"mouseenter.uniform":function(){n.addClass(k.hoverClass)},"mouseleave.uniform":function(){n.removeClass(k.hoverClass+" "+k.activeClass)},"keyup.uniform":function(){l.text(m.find(":selected").text())}});if(m.attr("disabled")){n.addClass(k.disabledClass)}a.uniform.noSelect(l);b(m)};var f=function(m){var n=a("<div>"),l=a("<span>");if(!m.css("display")=="none"&&k.autoHide){n.hide()}n.addClass(k.checkboxClass);if(k.useID&&m.attr("id")){n.attr("id",k.idPrefix+"-"+m.attr("id"))}m.wrap(n).wrap(l);l=m.parent();n=l.parent();m.css("opacity",0).bind({"focus.uniform":function(){n.addClass(k.focusClass)},"blur.uniform":function(){n.removeClass(k.focusClass)},"click.uniform touchend.uniform":function(){var o=m.attr("checked")?"add":"remove";l[o+"Class"](k.checkedClass)},"mousedown.uniform touchbegin.uniform":function(){n.addClass(k.activeClass)},"mouseup.uniform touchend.uniform":function(){n.removeClass(k.activeClass)},"mouseenter.uniform":function(){n.addClass(k.hoverClass)},"mouseleave.uniform":function(){n.removeClass(k.hoverClass+" "+k.activeClass)}});if(m.attr("checked")){l.addClass(k.checkedClass)}if(m.attr("disabled")){n.addClass(k.disabledClass)}b(m)};var c=function(m){var n=a("<div>"),l=a("<span>");if(!m.css("display")=="none"&&k.autoHide){n.hide()}n.addClass(k.radioClass);if(k.useID&&m.attr("id")){n.attr("id",k.idPrefix+"-"+m.attr("id"))}m.wrap(n).wrap(l);l=m.parent();n=l.parent();m.css("opacity",0).bind({"focus.uniform":function(){n.addClass(k.focusClass)},"blur.uniform":function(){n.removeClass(k.focusClass)},"click.uniform touchend.uniform":function(){if(!m.attr("checked")){l.removeClass(k.checkedClass)}else{a("."+k.radioClass.replace(" ",".")+" span."+k.checkedClass+":has([name="+m.attr("name")+"])").removeClass(k.checkedClass);l.addClass(k.checkedClass)}},"mousedown.uniform touchend.uniform":function(){if(!m.is(":disabled")){n.addClass(k.activeClass)}},"mouseup.uniform touchbegin.uniform":function(){n.removeClass(k.activeClass)},"mouseenter.uniform touchend.uniform":function(){n.addClass(k.hoverClass)},"mouseleave.uniform":function(){n.removeClass(k.hoverClass+" "+k.activeClass)}});if(m.attr("checked")){l.addClass(k.checkedClass)}if(m.attr("disabled")){n.addClass(k.disabledClass)}b(m)};var h=function(o){var q=a("<div>"),p=a("<span>",{text:k.fileDefaultText}),m=a("<span>",{text:k.fileBtnText});if(!o.css("display")=="none"&&k.autoHide){q.hide()}q.addClass(k.fileClass);p.addClass(k.filenameClass);m.addClass(k.fileBtnClass);if(k.useID&&o.attr("id")){q.attr("id",k.idPrefix+"-"+o.attr("id"))}o.wrap(q).after(m).after(p);q=o.parent();p=o.siblings("."+k.filenameClass);m=o.siblings("."+k.fileBtnClass);if(!o.attr("size")){var l=q.width();o.attr("size",l/10)}var n=function(){var r=o.val().split(/[\/\\]+/);r=r&&r[r.length-1]||k.fileDefaultText;p.text(r)};n();o.css("opacity",0).bind({"focus.uniform":function(){q.addClass(k.focusClass)},"blur.uniform":function(){q.removeClass(k.focusClass)},"mousedown.uniform":function(){if(!o.is(":disabled")){q.addClass(k.activeClass)}},"mouseup.uniform":function(){q.removeClass(k.activeClass)},"mouseenter.uniform":function(){q.addClass(k.hoverClass)},"mouseleave.uniform":function(){q.removeClass(k.hoverClass+" "+k.activeClass)}});if(a.browser.msie){o.bind("click.uniform.ie7",function(){setTimeout(n,0)})}else{o.bind("change.uniform",n)}if(o.attr("disabled")){q.addClass(k.disabledClass)}a.uniform.noSelect(p);a.uniform.noSelect(m);b(o)};var b=function(l){a.each(l,function(m,n){a.uniform.elements.push(n)})};return this.each(function(){if(a.support.selectOpacity){var l=a(this);if(l.is("select")&&!l.attr("multiple")&&!l.attr("size")||l.attr("size")<=1){e(l)}else{if(l.is(":checkbox")){f(l)}else{if(l.is(":radio")){c(l)}else{if(l.is(":file")){h(l)}else{if(l.is(":text, :password, input[type=email]")){j(l)}else{if(l.is("textarea")){g(l)}else{if(l.is("a")||l.is(":submit")||l.is(":reset")||l.is("button")||l.is("input[type=button]")){i(l)}}}}}}}}})}})(jQuery);